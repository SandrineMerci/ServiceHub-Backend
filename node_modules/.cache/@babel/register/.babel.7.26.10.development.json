{"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\Wego tronics\\\\Desktop\\\\D\\\\ServiceHub\\\\backend\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\Wego tronics\\\\Desktop\\\\D\\\\ServiceHub\\\\backend\",\"filename\":\"C:\\\\Users\\\\Wego tronics\\\\Desktop\\\\D\\\\ServiceHub\\\\backend\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\Wego tronics\\\\Desktop\\\\D\\\\ServiceHub\\\\backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.26.10:development":{"value":{"code":"const express = require(\"express\");\nconst mongoose = require(\"mongoose\");\nconst cors = require(\"cors\");\nconst dotenv = require(\"dotenv\");\nconst bookingRoutes = require(\"./routes/bookingRoutes\");\nconst authRoutes = require(\"./routes/auth\");\ndotenv.config();\n\n// Initialize Express app\nconst app = express();\napp.use(cors());\napp.use(express.json());\n\n// Routes\napp.get(\"/\", (req, res) => res.send(\"ServiceHubMarketplace API\"));\napp.use(\"/api/auth\", authRoutes);\napp.use(\"/api/bookings\", bookingRoutes);\n\n// MongoDB Connection\nconst db_user = process.env.DB_USER;\nconst db_name = process.env.DB_NAME;\nconst db_pass = process.env.DB_PASS;\nconst dbUri = `mongodb+srv://${db_user}:${db_pass}@cluster0.jdtdy.mongodb.net/${db_name}`;\nmongoose.set(\"strictQuery\", false);\nmongoose.connect(dbUri, {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n}).then(() => console.log(\"Connected to MongoDB\")).catch(error => console.log(\"MongoDB connection error:\", error));\n\n// Start Server\nconst port = process.env.PORT || 5000;\napp.listen(port, () => console.log(`Node API is running on http://localhost:${port}`));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsIm1vbmdvb3NlIiwiY29ycyIsImRvdGVudiIsImJvb2tpbmdSb3V0ZXMiLCJhdXRoUm91dGVzIiwiY29uZmlnIiwiYXBwIiwidXNlIiwianNvbiIsImdldCIsInJlcSIsInJlcyIsInNlbmQiLCJkYl91c2VyIiwicHJvY2VzcyIsImVudiIsIkRCX1VTRVIiLCJkYl9uYW1lIiwiREJfTkFNRSIsImRiX3Bhc3MiLCJEQl9QQVNTIiwiZGJVcmkiLCJzZXQiLCJjb25uZWN0IiwidXNlTmV3VXJsUGFyc2VyIiwidXNlVW5pZmllZFRvcG9sb2d5IiwidGhlbiIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImVycm9yIiwicG9ydCIsIlBPUlQiLCJsaXN0ZW4iXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcV2VnbyB0cm9uaWNzXFxEZXNrdG9wXFxEXFxTZXJ2aWNlSHViXFxiYWNrZW5kXFwiLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZShcImV4cHJlc3NcIik7XHJcbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpO1xyXG5jb25zdCBjb3JzID0gcmVxdWlyZShcImNvcnNcIik7XHJcbmNvbnN0IGRvdGVudiA9IHJlcXVpcmUoXCJkb3RlbnZcIik7XHJcbmNvbnN0IGJvb2tpbmdSb3V0ZXMgPSByZXF1aXJlKFwiLi9yb3V0ZXMvYm9va2luZ1JvdXRlc1wiKTtcclxuY29uc3QgYXV0aFJvdXRlcyA9IHJlcXVpcmUoXCIuL3JvdXRlcy9hdXRoXCIpO1xyXG5cclxuZG90ZW52LmNvbmZpZygpO1xyXG5cclxuLy8gSW5pdGlhbGl6ZSBFeHByZXNzIGFwcFxyXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XHJcbmFwcC51c2UoY29ycygpKTtcclxuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XHJcblxyXG4vLyBSb3V0ZXNcclxuYXBwLmdldChcIi9cIiwgKHJlcSwgcmVzKSA9PiByZXMuc2VuZChcIlNlcnZpY2VIdWJNYXJrZXRwbGFjZSBBUElcIikpO1xyXG5hcHAudXNlKFwiL2FwaS9hdXRoXCIsIGF1dGhSb3V0ZXMpO1xyXG5hcHAudXNlKFwiL2FwaS9ib29raW5nc1wiLCBib29raW5nUm91dGVzKTtcclxuXHJcbi8vIE1vbmdvREIgQ29ubmVjdGlvblxyXG5jb25zdCBkYl91c2VyID0gcHJvY2Vzcy5lbnYuREJfVVNFUjtcclxuY29uc3QgZGJfbmFtZSA9IHByb2Nlc3MuZW52LkRCX05BTUU7XHJcbmNvbnN0IGRiX3Bhc3MgPSBwcm9jZXNzLmVudi5EQl9QQVNTO1xyXG5jb25zdCBkYlVyaSA9IGBtb25nb2RiK3NydjovLyR7ZGJfdXNlcn06JHtkYl9wYXNzfUBjbHVzdGVyMC5qZHRkeS5tb25nb2RiLm5ldC8ke2RiX25hbWV9YDtcclxuXHJcbm1vbmdvb3NlLnNldChcInN0cmljdFF1ZXJ5XCIsIGZhbHNlKTtcclxubW9uZ29vc2VcclxuICAuY29ubmVjdChkYlVyaSwgeyB1c2VOZXdVcmxQYXJzZXI6IHRydWUsIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSB9KVxyXG4gIC50aGVuKCgpID0+IGNvbnNvbGUubG9nKFwiQ29ubmVjdGVkIHRvIE1vbmdvREJcIikpXHJcbiAgLmNhdGNoKChlcnJvcikgPT4gY29uc29sZS5sb2coXCJNb25nb0RCIGNvbm5lY3Rpb24gZXJyb3I6XCIsIGVycm9yKSk7XHJcblxyXG4vLyBTdGFydCBTZXJ2ZXJcclxuY29uc3QgcG9ydCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgNTAwMDtcclxuYXBwLmxpc3Rlbihwb3J0LCAoKSA9PiBjb25zb2xlLmxvZyhgTm9kZSBBUEkgaXMgcnVubmluZyBvbiBodHRwOi8vbG9jYWxob3N0OiR7cG9ydH1gKSk7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1DLFFBQVEsR0FBR0QsT0FBTyxDQUFDLFVBQVUsQ0FBQztBQUNwQyxNQUFNRSxJQUFJLEdBQUdGLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDNUIsTUFBTUcsTUFBTSxHQUFHSCxPQUFPLENBQUMsUUFBUSxDQUFDO0FBQ2hDLE1BQU1JLGFBQWEsR0FBR0osT0FBTyxDQUFDLHdCQUF3QixDQUFDO0FBQ3ZELE1BQU1LLFVBQVUsR0FBR0wsT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUUzQ0csTUFBTSxDQUFDRyxNQUFNLENBQUMsQ0FBQzs7QUFFZjtBQUNBLE1BQU1DLEdBQUcsR0FBR1IsT0FBTyxDQUFDLENBQUM7QUFDckJRLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDTixJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ2ZLLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDVCxPQUFPLENBQUNVLElBQUksQ0FBQyxDQUFDLENBQUM7O0FBRXZCO0FBQ0FGLEdBQUcsQ0FBQ0csR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsS0FBS0EsR0FBRyxDQUFDQyxJQUFJLENBQUMsMkJBQTJCLENBQUMsQ0FBQztBQUNqRU4sR0FBRyxDQUFDQyxHQUFHLENBQUMsV0FBVyxFQUFFSCxVQUFVLENBQUM7QUFDaENFLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDLGVBQWUsRUFBRUosYUFBYSxDQUFDOztBQUV2QztBQUNBLE1BQU1VLE9BQU8sR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUNDLE9BQU87QUFDbkMsTUFBTUMsT0FBTyxHQUFHSCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0csT0FBTztBQUNuQyxNQUFNQyxPQUFPLEdBQUdMLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSyxPQUFPO0FBQ25DLE1BQU1DLEtBQUssR0FBRyxpQkFBaUJSLE9BQU8sSUFBSU0sT0FBTywrQkFBK0JGLE9BQU8sRUFBRTtBQUV6RmpCLFFBQVEsQ0FBQ3NCLEdBQUcsQ0FBQyxhQUFhLEVBQUUsS0FBSyxDQUFDO0FBQ2xDdEIsUUFBUSxDQUNMdUIsT0FBTyxDQUFDRixLQUFLLEVBQUU7RUFBRUcsZUFBZSxFQUFFLElBQUk7RUFBRUMsa0JBQWtCLEVBQUU7QUFBSyxDQUFDLENBQUMsQ0FDbkVDLElBQUksQ0FBQyxNQUFNQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQy9DQyxLQUFLLENBQUVDLEtBQUssSUFBS0gsT0FBTyxDQUFDQyxHQUFHLENBQUMsMkJBQTJCLEVBQUVFLEtBQUssQ0FBQyxDQUFDOztBQUVwRTtBQUNBLE1BQU1DLElBQUksR0FBR2pCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDaUIsSUFBSSxJQUFJLElBQUk7QUFDckMxQixHQUFHLENBQUMyQixNQUFNLENBQUNGLElBQUksRUFBRSxNQUFNSixPQUFPLENBQUNDLEdBQUcsQ0FBQywyQ0FBMkNHLElBQUksRUFBRSxDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["express","require","mongoose","cors","dotenv","bookingRoutes","authRoutes","config","app","use","json","get","req","res","send","db_user","process","env","DB_USER","db_name","DB_NAME","db_pass","DB_PASS","dbUri","set","connect","useNewUrlParser","useUnifiedTopology","then","console","log","catch","error","port","PORT","listen"],"sourceRoot":"C:\\Users\\Wego tronics\\Desktop\\D\\ServiceHub\\backend\\","sources":["server.js"],"sourcesContent":["const express = require(\"express\");\r\nconst mongoose = require(\"mongoose\");\r\nconst cors = require(\"cors\");\r\nconst dotenv = require(\"dotenv\");\r\nconst bookingRoutes = require(\"./routes/bookingRoutes\");\r\nconst authRoutes = require(\"./routes/auth\");\r\n\r\ndotenv.config();\r\n\r\n// Initialize Express app\r\nconst app = express();\r\napp.use(cors());\r\napp.use(express.json());\r\n\r\n// Routes\r\napp.get(\"/\", (req, res) => res.send(\"ServiceHubMarketplace API\"));\r\napp.use(\"/api/auth\", authRoutes);\r\napp.use(\"/api/bookings\", bookingRoutes);\r\n\r\n// MongoDB Connection\r\nconst db_user = process.env.DB_USER;\r\nconst db_name = process.env.DB_NAME;\r\nconst db_pass = process.env.DB_PASS;\r\nconst dbUri = `mongodb+srv://${db_user}:${db_pass}@cluster0.jdtdy.mongodb.net/${db_name}`;\r\n\r\nmongoose.set(\"strictQuery\", false);\r\nmongoose\r\n  .connect(dbUri, { useNewUrlParser: true, useUnifiedTopology: true })\r\n  .then(() => console.log(\"Connected to MongoDB\"))\r\n  .catch((error) => console.log(\"MongoDB connection error:\", error));\r\n\r\n// Start Server\r\nconst port = process.env.PORT || 5000;\r\napp.listen(port, () => console.log(`Node API is running on http://localhost:${port}`));\r\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,QAAQ,GAAGD,OAAO,CAAC,UAAU,CAAC;AACpC,MAAME,IAAI,GAAGF,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAMG,MAAM,GAAGH,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAMI,aAAa,GAAGJ,OAAO,CAAC,wBAAwB,CAAC;AACvD,MAAMK,UAAU,GAAGL,OAAO,CAAC,eAAe,CAAC;AAE3CG,MAAM,CAACG,MAAM,CAAC,CAAC;;AAEf;AACA,MAAMC,GAAG,GAAGR,OAAO,CAAC,CAAC;AACrBQ,GAAG,CAACC,GAAG,CAACN,IAAI,CAAC,CAAC,CAAC;AACfK,GAAG,CAACC,GAAG,CAACT,OAAO,CAACU,IAAI,CAAC,CAAC,CAAC;;AAEvB;AACAF,GAAG,CAACG,GAAG,CAAC,GAAG,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAKA,GAAG,CAACC,IAAI,CAAC,2BAA2B,CAAC,CAAC;AACjEN,GAAG,CAACC,GAAG,CAAC,WAAW,EAAEH,UAAU,CAAC;AAChCE,GAAG,CAACC,GAAG,CAAC,eAAe,EAAEJ,aAAa,CAAC;;AAEvC;AACA,MAAMU,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,OAAO;AACnC,MAAMC,OAAO,GAAGH,OAAO,CAACC,GAAG,CAACG,OAAO;AACnC,MAAMC,OAAO,GAAGL,OAAO,CAACC,GAAG,CAACK,OAAO;AACnC,MAAMC,KAAK,GAAG,iBAAiBR,OAAO,IAAIM,OAAO,+BAA+BF,OAAO,EAAE;AAEzFjB,QAAQ,CAACsB,GAAG,CAAC,aAAa,EAAE,KAAK,CAAC;AAClCtB,QAAQ,CACLuB,OAAO,CAACF,KAAK,EAAE;EAAEG,eAAe,EAAE,IAAI;EAAEC,kBAAkB,EAAE;AAAK,CAAC,CAAC,CACnEC,IAAI,CAAC,MAAMC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC,CAAC,CAC/CC,KAAK,CAAEC,KAAK,IAAKH,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEE,KAAK,CAAC,CAAC;;AAEpE;AACA,MAAMC,IAAI,GAAGjB,OAAO,CAACC,GAAG,CAACiB,IAAI,IAAI,IAAI;AACrC1B,GAAG,CAAC2B,MAAM,CAACF,IAAI,EAAE,MAAMJ,OAAO,CAACC,GAAG,CAAC,2CAA2CG,IAAI,EAAE,CAAC,CAAC","ignoreList":[]}},"mtime":1742181391737},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\Wego tronics\\\\Desktop\\\\D\\\\ServiceHub\\\\backend\\\\routes\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\Users\\\\Wego tronics\\\\Desktop\\\\D\\\\ServiceHub\\\\backend\",\"filename\":\"C:\\\\Users\\\\Wego tronics\\\\Desktop\\\\D\\\\ServiceHub\\\\backend\\\\routes\\\\bookingRoutes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\Users\\\\Wego tronics\\\\Desktop\\\\D\\\\ServiceHub\\\\backend\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.26.10:development":{"value":{"code":"import express from \"express\";\nimport Booking from \"../models/Booking.js\";\nimport nodemailer from \"nodemailer\";\nimport dotenv from \"dotenv\";\ndotenv.config();\nconst router = express.Router();\n\n// Nodemailer setup\nconst transporter = nodemailer.createTransport({\n  service: \"gmail\",\n  auth: {\n    user: process.env.EMAIL_USER,\n    pass: process.env.EMAIL_PASS\n  }\n});\n\n// Book a service\nrouter.post(\"/\", async (req, res) => {\n  const {\n    serviceId,\n    name,\n    email,\n    phone,\n    date,\n    momoNumber\n  } = req.body;\n  if (!serviceId || !name || !email || !phone || !date || !momoNumber) {\n    return res.status(400).json({\n      error: \"All fields are required.\"\n    });\n  }\n  try {\n    const newBooking = new Booking({\n      serviceId,\n      name,\n      email,\n      phone,\n      date,\n      momoNumber\n    });\n    await newBooking.save();\n\n    // Send email notification\n    const mailOptions = {\n      from: process.env.EMAIL_USER,\n      to: process.env.RECEIVER_EMAIL,\n      // Your email\n      subject: \"New Booking Received!\",\n      html: `\n        <h2>New Booking Details</h2>\n        <p><strong>Service ID:</strong> ${serviceId}</p>\n        <p><strong>Name:</strong> ${name}</p>\n        <p><strong>Email:</strong> ${email}</p>\n        <p><strong>Phone:</strong> ${phone}</p>\n        <p><strong>Booking Date:</strong> ${date}</p>\n        <p><strong>MoMo Number:</strong> ${momoNumber}</p>\n      `\n    };\n    await transporter.sendMail(mailOptions);\n    console.log(\"Email sent to admin!\");\n    res.status(201).json({\n      message: \"Booking successful!\",\n      booking: newBooking\n    });\n  } catch (err) {\n    console.error(\"Error saving booking:\", err);\n    res.status(500).json({\n      error: \"Server error.\"\n    });\n  }\n});\nexport default router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwiQm9va2luZyIsIm5vZGVtYWlsZXIiLCJkb3RlbnYiLCJjb25maWciLCJyb3V0ZXIiLCJSb3V0ZXIiLCJ0cmFuc3BvcnRlciIsImNyZWF0ZVRyYW5zcG9ydCIsInNlcnZpY2UiLCJhdXRoIiwidXNlciIsInByb2Nlc3MiLCJlbnYiLCJFTUFJTF9VU0VSIiwicGFzcyIsIkVNQUlMX1BBU1MiLCJwb3N0IiwicmVxIiwicmVzIiwic2VydmljZUlkIiwibmFtZSIsImVtYWlsIiwicGhvbmUiLCJkYXRlIiwibW9tb051bWJlciIsImJvZHkiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJuZXdCb29raW5nIiwic2F2ZSIsIm1haWxPcHRpb25zIiwiZnJvbSIsInRvIiwiUkVDRUlWRVJfRU1BSUwiLCJzdWJqZWN0IiwiaHRtbCIsInNlbmRNYWlsIiwiY29uc29sZSIsImxvZyIsIm1lc3NhZ2UiLCJib29raW5nIiwiZXJyIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXFdlZ28gdHJvbmljc1xcRGVza3RvcFxcRFxcU2VydmljZUh1YlxcYmFja2VuZFxccm91dGVzXFwiLCJzb3VyY2VzIjpbImJvb2tpbmdSb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IEJvb2tpbmcgZnJvbSBcIi4uL21vZGVscy9Cb29raW5nLmpzXCI7XHJcbmltcG9ydCBub2RlbWFpbGVyIGZyb20gXCJub2RlbWFpbGVyXCI7XHJcbmltcG9ydCBkb3RlbnYgZnJvbSBcImRvdGVudlwiO1xyXG5cclxuZG90ZW52LmNvbmZpZygpO1xyXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxuLy8gTm9kZW1haWxlciBzZXR1cFxyXG5jb25zdCB0cmFuc3BvcnRlciA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcclxuICBzZXJ2aWNlOiBcImdtYWlsXCIsXHJcbiAgYXV0aDoge1xyXG4gICAgdXNlcjogcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUixcclxuICAgIHBhc3M6IHByb2Nlc3MuZW52LkVNQUlMX1BBU1MsXHJcbiAgfSxcclxufSk7XHJcblxyXG4vLyBCb29rIGEgc2VydmljZVxyXG5yb3V0ZXIucG9zdChcIi9cIiwgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyBzZXJ2aWNlSWQsIG5hbWUsIGVtYWlsLCBwaG9uZSwgZGF0ZSwgbW9tb051bWJlciB9ID0gcmVxLmJvZHk7XHJcblxyXG4gIGlmICghc2VydmljZUlkIHx8ICFuYW1lIHx8ICFlbWFpbCB8fCAhcGhvbmUgfHwgIWRhdGUgfHwgIW1vbW9OdW1iZXIpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiBcIkFsbCBmaWVsZHMgYXJlIHJlcXVpcmVkLlwiIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IG5ld0Jvb2tpbmcgPSBuZXcgQm9va2luZyh7XHJcbiAgICAgIHNlcnZpY2VJZCxcclxuICAgICAgbmFtZSxcclxuICAgICAgZW1haWwsXHJcbiAgICAgIHBob25lLFxyXG4gICAgICBkYXRlLFxyXG4gICAgICBtb21vTnVtYmVyLFxyXG4gICAgfSk7XHJcblxyXG4gICAgYXdhaXQgbmV3Qm9va2luZy5zYXZlKCk7XHJcblxyXG4gICAgLy8gU2VuZCBlbWFpbCBub3RpZmljYXRpb25cclxuICAgIGNvbnN0IG1haWxPcHRpb25zID0ge1xyXG4gICAgICBmcm9tOiBwcm9jZXNzLmVudi5FTUFJTF9VU0VSLFxyXG4gICAgICB0bzogcHJvY2Vzcy5lbnYuUkVDRUlWRVJfRU1BSUwsIC8vIFlvdXIgZW1haWxcclxuICAgICAgc3ViamVjdDogXCJOZXcgQm9va2luZyBSZWNlaXZlZCFcIixcclxuICAgICAgaHRtbDogYFxyXG4gICAgICAgIDxoMj5OZXcgQm9va2luZyBEZXRhaWxzPC9oMj5cclxuICAgICAgICA8cD48c3Ryb25nPlNlcnZpY2UgSUQ6PC9zdHJvbmc+ICR7c2VydmljZUlkfTwvcD5cclxuICAgICAgICA8cD48c3Ryb25nPk5hbWU6PC9zdHJvbmc+ICR7bmFtZX08L3A+XHJcbiAgICAgICAgPHA+PHN0cm9uZz5FbWFpbDo8L3N0cm9uZz4gJHtlbWFpbH08L3A+XHJcbiAgICAgICAgPHA+PHN0cm9uZz5QaG9uZTo8L3N0cm9uZz4gJHtwaG9uZX08L3A+XHJcbiAgICAgICAgPHA+PHN0cm9uZz5Cb29raW5nIERhdGU6PC9zdHJvbmc+ICR7ZGF0ZX08L3A+XHJcbiAgICAgICAgPHA+PHN0cm9uZz5Nb01vIE51bWJlcjo8L3N0cm9uZz4gJHttb21vTnVtYmVyfTwvcD5cclxuICAgICAgYCxcclxuICAgIH07XHJcblxyXG4gICAgYXdhaXQgdHJhbnNwb3J0ZXIuc2VuZE1haWwobWFpbE9wdGlvbnMpO1xyXG4gICAgY29uc29sZS5sb2coXCJFbWFpbCBzZW50IHRvIGFkbWluIVwiKTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7IG1lc3NhZ2U6IFwiQm9va2luZyBzdWNjZXNzZnVsIVwiLCBib29raW5nOiBuZXdCb29raW5nIH0pO1xyXG4gIH0gY2F0Y2ggKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHNhdmluZyBib29raW5nOlwiLCBlcnIpO1xyXG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogXCJTZXJ2ZXIgZXJyb3IuXCIgfSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcclxuIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxPQUFPLE1BQU0sU0FBUztBQUM3QixPQUFPQyxPQUFPLE1BQU0sc0JBQXNCO0FBQzFDLE9BQU9DLFVBQVUsTUFBTSxZQUFZO0FBQ25DLE9BQU9DLE1BQU0sTUFBTSxRQUFRO0FBRTNCQSxNQUFNLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0FBQ2YsTUFBTUMsTUFBTSxHQUFHTCxPQUFPLENBQUNNLE1BQU0sQ0FBQyxDQUFDOztBQUUvQjtBQUNBLE1BQU1DLFdBQVcsR0FBR0wsVUFBVSxDQUFDTSxlQUFlLENBQUM7RUFDN0NDLE9BQU8sRUFBRSxPQUFPO0VBQ2hCQyxJQUFJLEVBQUU7SUFDSkMsSUFBSSxFQUFFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsVUFBVTtJQUM1QkMsSUFBSSxFQUFFSCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0c7RUFDcEI7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQVgsTUFBTSxDQUFDWSxJQUFJLENBQUMsR0FBRyxFQUFFLE9BQU9DLEdBQUcsRUFBRUMsR0FBRyxLQUFLO0VBQ25DLE1BQU07SUFBRUMsU0FBUztJQUFFQyxJQUFJO0lBQUVDLEtBQUs7SUFBRUMsS0FBSztJQUFFQyxJQUFJO0lBQUVDO0VBQVcsQ0FBQyxHQUFHUCxHQUFHLENBQUNRLElBQUk7RUFFcEUsSUFBSSxDQUFDTixTQUFTLElBQUksQ0FBQ0MsSUFBSSxJQUFJLENBQUNDLEtBQUssSUFBSSxDQUFDQyxLQUFLLElBQUksQ0FBQ0MsSUFBSSxJQUFJLENBQUNDLFVBQVUsRUFBRTtJQUNuRSxPQUFPTixHQUFHLENBQUNRLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO01BQUVDLEtBQUssRUFBRTtJQUEyQixDQUFDLENBQUM7RUFDcEU7RUFFQSxJQUFJO0lBQ0YsTUFBTUMsVUFBVSxHQUFHLElBQUk3QixPQUFPLENBQUM7TUFDN0JtQixTQUFTO01BQ1RDLElBQUk7TUFDSkMsS0FBSztNQUNMQyxLQUFLO01BQ0xDLElBQUk7TUFDSkM7SUFDRixDQUFDLENBQUM7SUFFRixNQUFNSyxVQUFVLENBQUNDLElBQUksQ0FBQyxDQUFDOztJQUV2QjtJQUNBLE1BQU1DLFdBQVcsR0FBRztNQUNsQkMsSUFBSSxFQUFFckIsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFVBQVU7TUFDNUJvQixFQUFFLEVBQUV0QixPQUFPLENBQUNDLEdBQUcsQ0FBQ3NCLGNBQWM7TUFBRTtNQUNoQ0MsT0FBTyxFQUFFLHVCQUF1QjtNQUNoQ0MsSUFBSSxFQUFFO0FBQ1o7QUFDQSwwQ0FBMENqQixTQUFTO0FBQ25ELG9DQUFvQ0MsSUFBSTtBQUN4QyxxQ0FBcUNDLEtBQUs7QUFDMUMscUNBQXFDQyxLQUFLO0FBQzFDLDRDQUE0Q0MsSUFBSTtBQUNoRCwyQ0FBMkNDLFVBQVU7QUFDckQ7SUFDSSxDQUFDO0lBRUQsTUFBTWxCLFdBQVcsQ0FBQytCLFFBQVEsQ0FBQ04sV0FBVyxDQUFDO0lBQ3ZDTyxPQUFPLENBQUNDLEdBQUcsQ0FBQyxzQkFBc0IsQ0FBQztJQUVuQ3JCLEdBQUcsQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRWEsT0FBTyxFQUFFLHFCQUFxQjtNQUFFQyxPQUFPLEVBQUVaO0lBQVcsQ0FBQyxDQUFDO0VBQy9FLENBQUMsQ0FBQyxPQUFPYSxHQUFHLEVBQUU7SUFDWkosT0FBTyxDQUFDVixLQUFLLENBQUMsdUJBQXVCLEVBQUVjLEdBQUcsQ0FBQztJQUMzQ3hCLEdBQUcsQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7TUFBRUMsS0FBSyxFQUFFO0lBQWdCLENBQUMsQ0FBQztFQUNsRDtBQUNGLENBQUMsQ0FBQztBQUVGLGVBQWV4QixNQUFNIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["express","Booking","nodemailer","dotenv","config","router","Router","transporter","createTransport","service","auth","user","process","env","EMAIL_USER","pass","EMAIL_PASS","post","req","res","serviceId","name","email","phone","date","momoNumber","body","status","json","error","newBooking","save","mailOptions","from","to","RECEIVER_EMAIL","subject","html","sendMail","console","log","message","booking","err"],"sourceRoot":"C:\\Users\\Wego tronics\\Desktop\\D\\ServiceHub\\backend\\routes\\","sources":["bookingRoutes.js"],"sourcesContent":["import express from \"express\";\r\nimport Booking from \"../models/Booking.js\";\r\nimport nodemailer from \"nodemailer\";\r\nimport dotenv from \"dotenv\";\r\n\r\ndotenv.config();\r\nconst router = express.Router();\r\n\r\n// Nodemailer setup\r\nconst transporter = nodemailer.createTransport({\r\n  service: \"gmail\",\r\n  auth: {\r\n    user: process.env.EMAIL_USER,\r\n    pass: process.env.EMAIL_PASS,\r\n  },\r\n});\r\n\r\n// Book a service\r\nrouter.post(\"/\", async (req, res) => {\r\n  const { serviceId, name, email, phone, date, momoNumber } = req.body;\r\n\r\n  if (!serviceId || !name || !email || !phone || !date || !momoNumber) {\r\n    return res.status(400).json({ error: \"All fields are required.\" });\r\n  }\r\n\r\n  try {\r\n    const newBooking = new Booking({\r\n      serviceId,\r\n      name,\r\n      email,\r\n      phone,\r\n      date,\r\n      momoNumber,\r\n    });\r\n\r\n    await newBooking.save();\r\n\r\n    // Send email notification\r\n    const mailOptions = {\r\n      from: process.env.EMAIL_USER,\r\n      to: process.env.RECEIVER_EMAIL, // Your email\r\n      subject: \"New Booking Received!\",\r\n      html: `\r\n        <h2>New Booking Details</h2>\r\n        <p><strong>Service ID:</strong> ${serviceId}</p>\r\n        <p><strong>Name:</strong> ${name}</p>\r\n        <p><strong>Email:</strong> ${email}</p>\r\n        <p><strong>Phone:</strong> ${phone}</p>\r\n        <p><strong>Booking Date:</strong> ${date}</p>\r\n        <p><strong>MoMo Number:</strong> ${momoNumber}</p>\r\n      `,\r\n    };\r\n\r\n    await transporter.sendMail(mailOptions);\r\n    console.log(\"Email sent to admin!\");\r\n\r\n    res.status(201).json({ message: \"Booking successful!\", booking: newBooking });\r\n  } catch (err) {\r\n    console.error(\"Error saving booking:\", err);\r\n    res.status(500).json({ error: \"Server error.\" });\r\n  }\r\n});\r\n\r\nexport default router;\r\n"],"mappings":"AAAA,OAAOA,OAAO,MAAM,SAAS;AAC7B,OAAOC,OAAO,MAAM,sBAAsB;AAC1C,OAAOC,UAAU,MAAM,YAAY;AACnC,OAAOC,MAAM,MAAM,QAAQ;AAE3BA,MAAM,CAACC,MAAM,CAAC,CAAC;AACf,MAAMC,MAAM,GAAGL,OAAO,CAACM,MAAM,CAAC,CAAC;;AAE/B;AACA,MAAMC,WAAW,GAAGL,UAAU,CAACM,eAAe,CAAC;EAC7CC,OAAO,EAAE,OAAO;EAChBC,IAAI,EAAE;IACJC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,UAAU;IAC5BC,IAAI,EAAEH,OAAO,CAACC,GAAG,CAACG;EACpB;AACF,CAAC,CAAC;;AAEF;AACAX,MAAM,CAACY,IAAI,CAAC,GAAG,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACnC,MAAM;IAAEC,SAAS;IAAEC,IAAI;IAAEC,KAAK;IAAEC,KAAK;IAAEC,IAAI;IAAEC;EAAW,CAAC,GAAGP,GAAG,CAACQ,IAAI;EAEpE,IAAI,CAACN,SAAS,IAAI,CAACC,IAAI,IAAI,CAACC,KAAK,IAAI,CAACC,KAAK,IAAI,CAACC,IAAI,IAAI,CAACC,UAAU,EAAE;IACnE,OAAON,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAE;IAA2B,CAAC,CAAC;EACpE;EAEA,IAAI;IACF,MAAMC,UAAU,GAAG,IAAI7B,OAAO,CAAC;MAC7BmB,SAAS;MACTC,IAAI;MACJC,KAAK;MACLC,KAAK;MACLC,IAAI;MACJC;IACF,CAAC,CAAC;IAEF,MAAMK,UAAU,CAACC,IAAI,CAAC,CAAC;;IAEvB;IACA,MAAMC,WAAW,GAAG;MAClBC,IAAI,EAAErB,OAAO,CAACC,GAAG,CAACC,UAAU;MAC5BoB,EAAE,EAAEtB,OAAO,CAACC,GAAG,CAACsB,cAAc;MAAE;MAChCC,OAAO,EAAE,uBAAuB;MAChCC,IAAI,EAAE;AACZ;AACA,0CAA0CjB,SAAS;AACnD,oCAAoCC,IAAI;AACxC,qCAAqCC,KAAK;AAC1C,qCAAqCC,KAAK;AAC1C,4CAA4CC,IAAI;AAChD,2CAA2CC,UAAU;AACrD;IACI,CAAC;IAED,MAAMlB,WAAW,CAAC+B,QAAQ,CAACN,WAAW,CAAC;IACvCO,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;IAEnCrB,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEa,OAAO,EAAE,qBAAqB;MAAEC,OAAO,EAAEZ;IAAW,CAAC,CAAC;EAC/E,CAAC,CAAC,OAAOa,GAAG,EAAE;IACZJ,OAAO,CAACV,KAAK,CAAC,uBAAuB,EAAEc,GAAG,CAAC;IAC3CxB,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAE;IAAgB,CAAC,CAAC;EAClD;AACF,CAAC,CAAC;AAEF,eAAexB,MAAM","ignoreList":[]}},"mtime":1742172762847}}